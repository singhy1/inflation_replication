
  ___  ____  ____  ____  ____ ®
 /__    /   ____/   /   ____/      StataNow 19.5
___/   /   /___/   /   /___/       MP—Parallel Edition

 Statistics and Data Science       Copyright 1985-2025 StataCorp LLC
                                   StataCorp
                                   4905 Lakeway Drive
                                   College Station, Texas 77845 USA
                                   800-782-8272        https://www.stata.com
                                   979-696-4600        service@stata.com

Stata license: 22-user 8-core network, expiring 30 Jun 2026
Serial number: 501909306443
  Licensed to: Kwon Giyoung
               Becker Friedman Institute

Notes:
      1. Stata is running in batch mode.
      2. Unicode is supported; see help unicode_advice.
      3. More than 2 billion observations are allowed; see help obs_advice.
      4. Maximum number of variables is set to 5,000 but can be increased;
          see help set_maxvar.

. do ./2_process_data_appendix.do 

. global data_dir "/Users/giyoung/Downloads/inflation_replication/scripts/maste
> r/data/raw"

. global output_dir "/Users/giyoung/Downloads/inflation_replication/scripts/mas
> ter/data/processed"

. 
. ******* Figure B.5, Panel B, C **********************************************
> ********
. 
. use "$data_dir/atlFed_wage_data_15t24.dta", clear

. 
. gen obs = 1

. 
. * Wage Growth by Quartile x jstayergroup
. preserve 

. * Take the median wage growth for each group
. collapse (median) med_w_growth = wagegrowthtracker83 (sum) wgt = obs, ///
>     by(date_monthly wagegroup jstayergroup)

. 
. * Sort to prepare for moving average
. sort wagegroup jstayergroup date_monthly

. 
. * 3-month moving average
. gen smoothed_med_w_growth = ( ///
>     med_w_growth + ///
>     med_w_growth[_n-1] + med_w_growth[_n-2] + med_w_growth[_n-3] + med_w_grow
> th[_n-4] + med_w_growth[_n-5] + ///
>     med_w_growth[_n-6] + med_w_growth[_n-7] + med_w_growth[_n-8] + med_w_grow
> th[_n-9] + med_w_growth[_n-10] + ///
>     med_w_growth[_n-11]) / 12
(11 missing values generated)

. 
. 
. * Rename for consistency
. rename smoothed_med_w_growth smwg

. 
. * Create group ID
. gen group = wagegroup + "_" + jstayergroup

. replace group = subinstr(group, " ", "_", .)
(960 real changes made)

. 
. 
. * Keep only necessary variables
. keep date_monthly group smwg

. 
. * Reshape to wide format
. reshape wide smwg, i(date_monthly) j(group) string
(j = 1st_Job_Stayer 1st_Job_Switcher 2nd_Job_Stayer 2nd_Job_Switcher 3rd_Job_St
> ayer 3rd_Job_Switcher 4th_Job_Stayer 4th_Job_Switcher)

Data                               Long   ->   Wide
-----------------------------------------------------------------------------
Number of observations              960   ->   120         
Number of variables                   3   ->   9           
j variable (8 values)             group   ->   (dropped)
xij variables:
                                   smwg   ->   smwg1st_Job_Stayer smwg1st_Job_S
> witcher ... smwg4th_Job_Switcher
-----------------------------------------------------------------------------

. 
. * Restrict to post-2016 period
. keep if date_monthly >= tm(2016m1)
(12 observations deleted)

. 
. * now we have our wage growth measure for each wage group {1,2,3,4} x jstayer
> group 
. export delimited "$output_dir/figure_B_5_B_C.csv", replace 
file /Users/giyoung/Downloads/inflation_replication/scripts/master/data/process
> ed/figure_B_5_B_C.csv saved

. restore 

. 
. 
. ******* Figure B.8 **********************************************************
> ****
. 
. use "$data_dir/atlFed_wage_data_15t24.dta", clear

. 
. * Create education group label based on numeric codes
. gen educ_group_lbl = ""
(197,801 missing values generated)

. replace educ_group_lbl = "Bachelors_plus" if inlist(educ92, 6, 7)
variable educ_group_lbl was str1 now str14
(82,595 real changes made)

. replace educ_group_lbl = "Less than Bachelors" if inlist(educ92, 1, 2, 3, 4, 
> 5)
variable educ_group_lbl was str14 now str19
(115,206 real changes made)

. 
. * Wage Growth by Quartile x education group 
. preserve 

. * Take the median wage growth for each group
. collapse (median) med_w_growth = wagegrowthtracker83 (sum) wgt = obs, ///
>     by(date_monthly wagegroup educ_group_lbl)

. 
. * Sort to prepare for moving average
. sort wagegroup educ_group_lbl date_monthly

. 
. * 3-month moving average
. gen smoothed_med_w_growth = ( ///
>     med_w_growth + ///
>     med_w_growth[_n-1] + med_w_growth[_n-2] + med_w_growth[_n-3] + med_w_grow
> th[_n-4] + med_w_growth[_n-5] + ///
>     med_w_growth[_n-6] + med_w_growth[_n-7] + med_w_growth[_n-8] + med_w_grow
> th[_n-9] + med_w_growth[_n-10] + ///
>     med_w_growth[_n-11]) / 12
(11 missing values generated)

. 
. * Rename for consistency
. rename smoothed_med_w_growth smwg

. 
. * Create group ID
. gen group = wagegroup + "_" + educ_group_lbl

. replace group = subinstr(group, " ", "_", .)
(480 real changes made)

. 
. * Keep only necessary variables
. keep date_monthly group smwg

. 
. * Reshape to wide format
. reshape wide smwg, i(date_monthly) j(group) string
(j = 1st_Bachelors_plus 1st_Less_than_Bachelors 2nd_Bachelors_plus 2nd_Less_tha
> n_Bachelors 3rd_Bachelors_plus 3rd_Less_than_Bachelors 4th_Bachelors_plus 4th
> _Less_than_Bachelors)

Data                               Long   ->   Wide
-----------------------------------------------------------------------------
Number of observations              960   ->   120         
Number of variables                   3   ->   9           
j variable (8 values)             group   ->   (dropped)
xij variables:
                                   smwg   ->   smwg1st_Bachelors_plus smwg1st_L
> ess_than_Bachelors ... smwg4th_Less_than_Bachelors
-----------------------------------------------------------------------------

. 
. * Restrict to post-2016 period
. keep if date_monthly >= tm(2016m1)
(12 observations deleted)

. 
. * now we have our wage growth measure for each wage group {1,2,3,4} x work-fr
> om-home exposure group {low, high}
. export delimited "$output_dir/figure_B_8_temp1.csv", replace 
file /Users/giyoung/Downloads/inflation_replication/scripts/master/data/process
> ed/figure_B_8_temp1.csv saved

. restore 

. 
. * Pooled 
. 
. * Take the median wage growth for each group
. collapse (median) med_w_growth = wagegrowthtracker83 (sum) wgt = obs, ///
>     by(date_monthly wagegroup)

. 
. * Sort to prepare for moving average
. sort wagegroup date_monthly

. 
. * 3-month moving average
. gen smoothed_med_w_growth = ( ///
>     med_w_growth + ///
>     med_w_growth[_n-1] + med_w_growth[_n-2] + med_w_growth[_n-3] + med_w_grow
> th[_n-4] + med_w_growth[_n-5] + ///
>     med_w_growth[_n-6] + med_w_growth[_n-7] + med_w_growth[_n-8] + med_w_grow
> th[_n-9] + med_w_growth[_n-10] + ///
>     med_w_growth[_n-11]) / 12
(11 missing values generated)

. 
. * Rename for consistency
. rename smoothed_med_w_growth smwg

. 
. gen group = wagegroup

. replace group = subinstr(group, " ", "_", .)
(0 real changes made)

. 
. * Keep only necessary variables
. keep date_monthly group smwg

. 
. * Reshape to wide format
. reshape wide smwg, i(date_monthly) j(group) string
(j = 1st 2nd 3rd 4th)

Data                               Long   ->   Wide
-----------------------------------------------------------------------------
Number of observations              480   ->   120         
Number of variables                   3   ->   5           
j variable (4 values)             group   ->   (dropped)
xij variables:
                                   smwg   ->   smwg1st smwg2nd ... smwg4th
-----------------------------------------------------------------------------

. 
. * Restrict to post-2016 period
. keep if date_monthly >= tm(2016m1)
(12 observations deleted)

. 
. * now we have our wage growth measure for each wage group {1,2,3,4} 
. export delimited "$output_dir/figure_B_8_temp2.csv", replace 
file /Users/giyoung/Downloads/inflation_replication/scripts/master/data/process
> ed/figure_B_8_temp2.csv saved

. 
. 
. 
end of do-file
